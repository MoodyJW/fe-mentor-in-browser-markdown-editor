<mat-sidenav-container
  class="sidenav-container"
  [hasBackdrop]="false"
  *ngIf="!isLoading; else spinner"
>
  <mat-sidenav
    #sidenav
    [opened]="menuIsOpen"
    [mode]="'push'"
    [disableClose]="true"
  >
    <div class="sidenav-menu-container">
      <h1 class="sidenav-header">MARKDOWN</h1>
      <h2 class="sidenav-subheader">MY DOCUMENTS</h2>
      <app-action-button
        [actionType]="'create'"
        (actionClicked)="createNewFile()"
      ></app-action-button>
      <div class="files-list-container" *ngIf="currentUser.mdFiles">
        <app-md-files-list
          [currentUser]="currentUser"
          (mdFileSelected)="switchCurrentMdFile($event)"
        ></app-md-files-list>
      </div>
      <div class="theme-toggle-container">
        <app-theme-toggle></app-theme-toggle>
      </div>
    </div>
  </mat-sidenav>
  <mat-sidenav-content class="sidenav-content">
    <app-header
      [currentUser]="currentUser"
      (toggleSidenav)="menuIsOpen = $event"
      (saveCurrentMdFile)="saveCurrentMdFile($event)"
    ></app-header>
    <app-preview-bar (previewToggled)="showMd = $event"></app-preview-bar>
    <app-md-content
      [currentMdFile]="currentUser.currentMdFile"
      [showMd]="showMd"
      (mdFileContentChanged)="currentUser.currentMdFile.content = $event"
    ></app-md-content>
    <footer><a href="https://github.com/MoodyJW">github</a></footer>
  </mat-sidenav-content>
</mat-sidenav-container>

<ng-template #spinner>
  <div class="spinner-container">
    <mat-spinner [diameter]="200"></mat-spinner>
  </div>
</ng-template>
